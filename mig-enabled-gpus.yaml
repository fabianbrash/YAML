nfd:
  enabled: true

operator:
  defaultRuntime: containerd

driver:
  enabled: true

toolkit:
  enabled: true

dcgm:
  enabled: true

mig:
  # 'mixed' strategy is required for granular control
  strategy: mixed

migManager:
  enabled: true
  config:
    create: true
    name: multi-card-mig-config
    default: "all-disabled"
    data:
      config.yaml: |
        version: v1
        mig-configs:
          # =======================================================
          #  A100 40GB CONFIGURATIONS
          #  (Note: Slice sizes are half of the 80GB card)
          #  EXAMPLE NODE LABLE(s): nvidia.com/mig.config:a100-40gb-max-density
          #  OR nvidia.com/mig.config:a100-40gb-large-slices
          # =======================================================
          
          # Option 1: A100 40GB Max Density (7 tiny slices)
          a100-40gb-max-density:
            - devices: all
              mig-enabled: true
              mig-devices:
                "1g.5gb": 7

          # Option 2: A100 40GB Large Slices (2 slices of 20GB)
          a100-40gb-large-slices:
            - devices: all
              mig-enabled: true
              mig-devices:
                "3g.20gb": 2

          # Option 3: A100 40GB Mixed (1 Medium Dev + 4 Small Inference)
          a100-40gb-mixed:
            - devices: all
              mig-enabled: true
              mig-devices:
                "3g.20gb": 1
                "1g.5gb": 4

          # =======================================================
          #  A100 80GB CONFIGURATIONS
          #  EXAMPLE NODE LABLE(s): nvidia.com/mig.config:a100-80gb-max-density
          #  OR nvidia.com/mig.config:a100-80gb-mixed
          # =======================================================
          a100-80gb-max-density:
            - devices: all
              mig-enabled: true
              mig-devices:
                "1g.10gb": 7

          a100-80gb-large-slices:
            - devices: all
              mig-enabled: true
              mig-devices:
                "3g.40gb": 2

          a100-80gb-mixed:
            - devices: all
              mig-enabled: true
              mig-devices:
                "3g.40gb": 1
                "1g.10gb": 4

          # =======================================================
          #  H100 80GB CONFIGURATIONS
          #  EXAMPLE NODE LABLE(s): nvidia.com/mig.config:h100-80gb-max-density
          #  OR nvidia.com/mig.config:h100-80gb-large-slices
          # =======================================================
          h100-80gb-max-density:
            - devices: all
              mig-enabled: true
              mig-devices:
                "1g.10gb": 7

          h100-80gb-large-slices:
            - devices: all
              mig-enabled: true
              mig-devices:
                "3g.40gb": 2

          h100-80gb-mixed:
            - devices: all
              mig-enabled: true
              mig-devices:
                "3g.40gb": 1
                "1g.10gb": 4

          # =======================================================
          #  H200 141GB CONFIGURATIONS
          # =======================================================
          h200-141gb-max-density:
            - devices: all
              mig-enabled: true
              mig-devices:
                "1g.18gb": 7

          h200-141gb-large-slices:
            - devices: all
              mig-enabled: true
              mig-devices:
                "3g.71gb": 2

          h200-141gb-mixed:
            - devices: all
              mig-enabled: true
              mig-devices:
                "3g.71gb": 1
                "1g.18gb": 4

          # =======================================================
          #  B200 180GB (Blackwell) CONFIGURATIONS
          # =======================================================
          b200-180gb-max-density:
            - devices: all
              mig-enabled: true
              mig-devices:
                "1g.25gb": 7

          b200-180gb-large-slices:
            - devices: all
              mig-enabled: true
              mig-devices:
                "3g.90gb": 2

          b200-180gb-mixed:
            - devices: all
              mig-enabled: true
              mig-devices:
                "3g.90gb": 1
                "1g.25gb": 4
